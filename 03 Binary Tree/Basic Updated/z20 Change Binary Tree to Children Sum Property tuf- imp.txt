/*
Striver explanation
Check Children sum property of binary tree
Given the root of a binary tree, determine whether the tree satisfies the Children Sum Property. 
In this property, each non-leaf node must have a value equal to the sum of its left and right children's values
chat gpt sol

üéØ Children Sum Property:
For every node:
node.val = (left != null ? left.val : 0) + (right != null ? right.val : 0)



üîÅ Logic Breakdown:
üîπ 1. Top-Down Pass (Preorder):
At each node:
- Compute childSum = left.val + right.val
- If childSum >= root.val ‚Üí set root.val = childSum
- Else ‚Üí push root.val down to children 
(set left.val = root.val and/or right.val = root.val)

üîπ 2. Bottom-Up Pass (Postorder):
- After the recursion (once children are updated), re-calculate:
root.val = left.val + right.val
- This fixes the parent to match new child values after recursive changes.

‚úÖ Why This Works:
Preorder ensures we don‚Äôt violate child sum during traversal
Postorder fixes parent values after children are adjusted

TC  O(N) - recursive traversal on the nodes
SC O(H) - height of the tree


      50
     /  \
    7    2
   / \    \
  3   5    1

50 value is assigned to 7 and 2 node values
*/


class Solution {
    public void changeTree(TreeNode root) {
        if (root == null) return;

        int childSum = 0;
        if (root.left != null) childSum += root.left.val;
        if (root.right != null) childSum += root.right.val;

        if (childSum >= root.val) {
            root.val = childSum;
        } else {
            if (root.left != null) root.left.val = root.val;
            if (root.right != null) root.right.val = root.val;
            
        }

        changeTree(root.left);
        changeTree(root.right);

        //backtrack
        // Postorder update to ensure final property holds
        int total = 0;
        if (root.left != null) total += root.left.val;
        if (root.right != null) total += root.right.val;

        if (root.left != null || root.right != null) root.val = total;
        // ‚ÄúOnly update me if I actually have children.‚Äù, 
        // if both are null then total=0 and root will be updated, avoid updation
        
    }
}

