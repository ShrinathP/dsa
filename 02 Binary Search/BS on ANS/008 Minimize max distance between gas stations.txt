/*
Leetcode 774 â€“ Minimize Max Distance to Gas Station
âœ… Java Solution (Binary Search on Double Precision)

ðŸ§  Problem Summary:
You're given:

An array stations[] where each station is at position stations[i] (sorted).
You can add K extra gas stations anywhere between the existing stations.
You need to minimize the maximum distance between adjacent gas stations.

Return:
The minimized maximum distance, up to 6 decimal places precision.

âœ… BSOA Key Insight:
Lower bound = 0 (perfectly zero distance, not possible in practice)
Upper bound = maximum distance between adjacent stations.

Check:
For a given distance, can we add at most K stations to make sure no segment > distance?

Input: stations = [1,2,3,4,5,6,7,8,9,10], K = 9
Output: 0.500000
*/

// Google gemini solution

public class Solution {
    public double minmaxGasDist(int[] stations, int k) {
        double left = 0, right = 0;
        // 1. Calculate the initial maximum gap to set the binary search bound
        for (int i = 0; i < stations.length - 1; i++) {
            right = Math.max(right, (double) stations[i + 1] - stations[i]);
        }
        
        // 2. Binary search for the minimum max distance
        while (right - left > 1e-6) {
            double mid = left + (right - left) / 2.0;
            if (canPlace(stations, k, mid)) {
                right = mid; // Try smaller distance
            } else {
                left = mid; // Need larger distance
            }
        }
        return right;
    }
    
    // 3. Feasibility check: Can we place K stations with max distance 'mid'?
    private boolean canPlace(int[] stations, int k, double maxDist) {
        int count = 0;
        for (int i = 0; i < stations.length - 1; i++) {
            double gap = stations[i + 1] - stations[i];
            // Number of stations needed is floor(gap / maxDist)
            count += (int) (gap / maxDist);
        }
        return count <= k;
    }
}

